<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>CodeBoard</title>
    <script type="text/javascript">
      // GitHub Pages SPA redirect for CodeBoard
      var l = window.location;

      // For https://username.github.io/CodeBoard/some/path
      // We want to redirect to https://username.github.io/CodeBoard/?/some/path

      var segments = l.pathname.split("/").filter(Boolean);

      if (segments.length > 1) {
        // Remove 'CodeBoard' from segments to get the route
        var route = segments.slice(1).join("/");

        // Redirect to CodeBoard base with the route as query parameter
        var redirect =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          "/CodeBoard/?/" +
          route +
          (l.search ? "&" + l.search.slice(1).replace(/&/g, "~and~") : "") +
          l.hash;

        l.replace(redirect);
      } else {
        // If no additional path, just go to CodeBoard home
        l.replace(
          l.protocol +
            "//" +
            l.hostname +
            (l.port ? ":" + l.port : "") +
            "/CodeBoard/"
        );
      }
    </script>
  </head>
  <body>
    <p>Redirecting to CodeBoard...</p>
  </body>
</html>
